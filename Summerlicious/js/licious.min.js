(function(l,ca){function P(){for(var a={},b=l.location.search.substr(1).split("&"),d=0;d<b.length;d++)if(""!==b[d]){var c=b[d].split("=");2==c.length&&(a[c[0]]=decodeURIComponent(c[1].replace(/\+/g," ")))}return a}function D(a){var b="";Object.keys(a).forEach(function(d,c,f){b+=""===b?"?":"&";b+=d+"="+a[d]});return b}function h(a){e[a]&&(delete e[a],a=D(e),a=l.location.protocol+"//"+l.location.host+l.location.pathname+a,history.pushState&&history.pushState({},"ignored title",a))}function g(a,b){e[a]=
b;var d=D(e),d=l.location.protocol+"//"+l.location.host+l.location.pathname+d;history.pushState&&history.pushState({},"ignored title",d)}function E(a){$("#tabToggle");$("#tabMap").removeClass("btn-primary");$("#tabMap").removeClass("btn-default");$("#tabList").removeClass("btn-primary");$("#tabList").removeClass("btn-default");$("#tabRev").removeClass("btn-primary");$("#tabRev").removeClass("btn-default");"tabMap"===a?($("#reservationtable").hide(),$("#tabRev").removeClass("active"),$("#liciouslisttable").hide(),
$("#tabList").removeClass("active"),$("#liciousmap").show(),$("#tabMap").addClass("active"),$("#tabMap").addClass("btn-primary"),g("view","tabMap"),F()):"tabList"===a?($("#liciousmap").hide(),$("#tabMap").removeClass("active"),$("#tabRev").removeClass("active"),$("#reservationtable").hide(),$("#liciouslisttable").show(),$("#tabList").addClass("active"),$("#tabList").addClass("btn-primary"),g("view","tabList")):($("#liciousmap").hide(),$("#tabMap").removeClass("active"),$("#liciouslisttable").hide(),
$("#tabList").removeClass("active"),$("#tabRev").addClass("active"),$("#tabRev").addClass("btn-primary"),$("#reservationtable").show(),g("view","tabRev"))}function Q(){$(".btn-toggle .pageToggleBtn").on("click",function(){E($(this).prop("id"))});$("#maincontent").on("click",".showdetail",function(){G=$(l).scrollTop();H($(this).data("unid"));I()});$("#detailModal").on("shown.bs.modal",function(){$(l).scrollTop(G);$("#liciousContent").addClass("hidden-print");$("#headerText").html(gblLiciousConfig.season);
J();"undefined"!==typeof addthis&&(addthis.toolbox(".addthis_toolbox"),addthis.counter(".addthis_counter"))});$("#detailModal").on("hidden.bs.modal",function(){$("#liciousContent").removeClass("hidden-print");h("key");$("body").removeClass("modal-open");return!1});$("#maincontent").find("select").change(function(){n()});$(".chkBox").change(function(){n()});$("#resetFilters").on("click",function(){$("#filterCuisine").val("All Cuisines");$("#filterNeighbourhood").val("All Neighbourhoods");$("#LunchPriceA").prop("checked",
!1);$("#LunchPriceB").prop("checked",!1);$("#LunchPriceC").prop("checked",!1);$("#DinnerPriceA").prop("checked",!1);$("#DinnerPriceB").prop("checked",!1);$("#DinnerPriceC").prop("checked",!1);$("#filterAccessible").prop("checked",!1);$("#filterVeggie").prop("checked",!1);$("#filterVegan").prop("checked",!1);$("#filterLocal").prop("checked",!1);$("#searchString").val("");n()});$("#maincontent").on("click",".mapclose",function(){K();return!1});"undefined"!==typeof addthis&&addthis.addEventListener("addthis.menu.open",
function(a){a.data.share.title=gblLiciousConfig.season;a.data.share.url=l.location.href});$("#searchBtn").on("click",function(){n()});$("#searchString").on("keypress",function(a){a=a.which||a.keyCode||0;13!==a&&9!==a||n()});$(".hasclear").keyup(function(){var a=$(this);a.next("span").toggle(!!a.val())});$(".clearer").click(function(){$(this).prev("input").val("").focus();$(this).hide();n()});$("#maincontent").on("click",".quantclick",function(){I()})}function L(a,b,d){var c=a.lunchprice;""===a.lunchprice&&
(c=a.dinnerprice);""!==a.lunchprice&&""!==a.dinnerprice&&(c=a.lunchprice+" | "+a.dinnerprice);var f=document.createElement("div");f.id="mapinfoboxdata";f.className="map addText";f.innerHTML="<div class='mapclose'><a href='#'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></div>";f.innerHTML+="<div class='titleText'><a class='showdetail' title='More information' href='#' data-unid='"+a.unid+"'>"+a.name+"</a></div>";f.innerHTML+="<div class='map sumText'>"+a.addsummary+"</br>"+a.phone+"</div><br />";f.innerHTML+=
"<div>"+a.cuisine+"<br/>"+c+"</div>";b.innerHTML=f.outerHTML;if(0<d.length){for(b=0;b<d.length;b++)$("#mapmarker"+b+"row").removeClass("highlight"),"restaurant"==d[b].type?(d[b].setIcon(k.restaurant),d[b].setZIndex(2E8)):(d[b].setIcon(k.culinary),d[b].setZIndex(200000001));$("#"+a.id+"row").addClass("highlight")}a.setAnimation(google.maps.Animation.BOUNCE);setTimeout(function(){a.setAnimation(null)},750);"restaurant"==a.type?a.setIcon(k.restaurant_selected):a.setIcon(k.culinary_selected);a.setZIndex(288000001)}
function M(a,b){K();var d=e.key;if("undefined"!==typeof e.key)a.setZoom(14);else{var c=new google.maps.LatLngBounds(new google.maps.LatLng(43.699223,-79.394098));a.fitBounds(c);a.setZoom(11)}for(c=0;c<b.length;c++)"restaurant"==b[c].type?(b[c].setIcon(k.restaurant),b[c].setZIndex(276E6)):(b[c].setIcon(k.culinary),b[c].setZIndex(277E6)),b[c].unid==d&&(a.setCenter(b[c].position),b[c].setZIndex(277000001),b[c].setIcon(k.restaurant_selected))}function K(){$("#mapinfoboxdata").remove()}function F(){v=
[];var a=new google.maps.LatLng(43.699223,-79.394098),b={zoom:11,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT},panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_BOTTOM},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}};m=new google.maps.Map(document.getElementById("liciousmap"),
b);var d;r=document.createElement("div");r.id="mapinfobox";r.className="infoBox";m.controls[google.maps.ControlPosition.TOP_LEFT].push(r);b=document.createElement("button");b.id="resetMap";b.className="resetMap";b.innerHTML="Reset Map";b.onclick=function(){M(m,v)};m.controls[google.maps.ControlPosition.RIGHT_TOP].push(b);w=new OverlappingMarkerSpiderfier(m,{keepSpiderfied:!0,legWeight:3,markersWontMove:!0,markersWontHide:!0,nearbyDistance:10});var c;$.each(z,function(b,e){c=b;a=new google.maps.LatLng(e.lic_lat,
e.lic_lng);d=new google.maps.Marker({id:"mapmarker"+c,type:"restaurant",icon:k.restaurant,position:a,map:m,name:e.lic_restName,summary:e.lic_profile,addsummary:e.lic_address,neighbourhood:e.lic_neighbourhood.join(", "),phone:e.lic_phone,cuisine:e.lic_cuisine.join(", "),unid:e.lic_documentID,lunchprice:e.lic_lunchprice,dinnerprice:e.lic_dinnerprice});d.setZIndex(277E6);v.push(d);w.addMarker(d);w.addListener("click",function(a,b){L(a,r,v)})});"geolocation"in navigator&&!0===jQuery.browser.mobile&&navigator.geolocation.getCurrentPosition(function(a){a=
new google.maps.LatLng(a.coords.latitude,a.coords.longitude);m.setCenter(a);m.setZoom(13)},function(){})}function R(){var a="";$.each(z,function(b,d){a+="<tr id='liciouslisttablerow"+b+"'>";a+="<td>";a+="<div>";a+='<div class="col-xs-12 col-sm-10 col-sm-push-2">';a+='<div class="restaurantname">';a+='<h3 class="lic_restname">';a+='<a href="#" class="showdetail" data-toggle="tooltip" data-placement="bottom" title="View the '+gblLiciousConfig.season+" menu for "+d.lic_restName+'" data-unid="'+d.lic_documentID+
'">';a+=d.lic_restName;a+="</a>";a+="</h3>";a+='<div class="lic_hotel">'+d.lic_hotel+"</div>";a+="</div>";a+='<div class="row">';a+='<div class="col-xs-12 col-sm-7">';a+='<div class="lic_address">'+d.lic_address;a+=""===d.lic_additionaladdress?"":", "+d.lic_additionaladdress;a+="</div>";a+='<div class="lic_phone">'+d.lic_phone+"</div>";a+='<div class="lic_neighbourhood">'+d.lic_neighbourhood.join(", ")+"</div>";a+='<div style="height: 0; overflow: hidden;">';a+=d.lic_search_name;a+="Yes"==d.lic_veggie?
"<span>vegetarianoffered</span>":"";a+="Yes"==d.lic_vegan?"<span>veganoffered</span>":"";a+="Yes"==d.lic_local?"<span>localfood</span>":"";a+="Yes"==d.lic_accessible?"<span>accessible</span>":"";a+="</div>";a+='<p class="icons">';a+="Yes"==d.lic_veggie?'<img data-toggle="tooltip" data-placement="bottom" title="Vegetarian<br/>three-course<br/>menu option<br/>available at <br/>'+d.lic_restName+'" class="icon" alt="'+d.lic_restName+' Vegetarian option Icon" src="'+p.veg+'" />':"";a+="Yes"===d.lic_vegan?
'<img data-toggle="tooltip" data-placement="bottom" title="Vegan<br/>three-course<br/>menu option<br/>available at <br/>'+d.lic_restName+'" class="icon" alt="'+d.lic_restName+' Vegan option Icon" src="'+p.vegan+'" />':"";a+="Yes"===d.lic_local?'<img data-toggle="tooltip" data-placement="bottom" title="Locally sourced<br/>menu option<br/>available at <br/>'+d.lic_restName+'" class="icon" alt="Local Meals Offered Icon for '+d.lic_restName+'" src="'+p.local+'" />':"";a+="Yes"===d.lic_accessible?'<img data-toggle="tooltip" data-placement="bottom" title="'+
d.lic_restName+' Accessible<br/>restaurant" class="icon" alt="'+d.lic_restName+'Restaurant Accessible Icon" src="'+p.acc+'" />':"";a+="</p>";a+='<div style="display: none;">';var c=d.lic_cuisine;for(b=0;b<c.length;b++)a+="Cuisine:"+c[b];a+=d.lic_lunchmenu+d.lic_dinnermenu;a+="</div>";a+="</div>";a+='<div class="col-xs-12 col-sm-5">';a+="<div>";a+="Yes"==d.lic_lunch?"<span>"+d.lic_lunchprice+"</span>":"";a+="Yes"==d.lic_lunch&&"Yes"==d.lic_dinner?" | ":"";a+="Yes"==d.lic_dinner?"<span>"+d.lic_dinnerprice+
"</span>":"";a+="<div>"+d.lic_cuisine.join(", ")+"</div>";a+="</div>";a+="</div>";a+="</div>\x3c!--end row--\x3e";a+="</div>\x3c!--end col-sm-10--\x3e";a+='<div class="hidden-xs col-sm-2 col-sm-pull-10">';a+='<a href="#" class="showdetail" data-unid="'+d.lic_documentID+'">';a+='<img  data-toggle="tooltip" data-placement="bottom" title="View the '+gblLiciousConfig.season+" menu for "+d.lic_restName+'" alt="Image of the'+d.lic_restName+'" class="restImg img-responsive img-thumbnail" src="'+d.lic_imagelink+
'" />';a+="</a>";a+="</div>";a+="</div>";a+="</td></tr>"});""===a&&(a+="<tr id='liciouslisttablerow0' ><td class='col-md-12'>No restaurants found</td></tr>");a='<thead><tr><th  class="filter-match" >'+gblLiciousConfig.season+" Prix Fixe Restaurant List</th></tr></thead><tbody>"+a+"</tbody>";$("#liciouslisttable").html(a);$(".icons img").tooltip({html:!0})}function n(){var a=$("#searchString").val(),b="",d="",c=$("#filterCuisine"),f=$("#filterNeighbourhood"),k=$("#filterAccessible"),l=$("#filterVeggie"),
N=$("#filterVegan"),p=$("#filterLocal");0<c.length&&(b="All Cuisines"!=c.val()?c.val():"");0<f.length&&(d="All Neighbourhoods"!=f.val()?f.val():"");var m=$("#LunchPriceA").is(":checked")?gblLiciousConfig.lunchPriceA+" Lunch":"FALSE",n=$("#LunchPriceB").is(":checked")?gblLiciousConfig.lunchPriceB+" Lunch":"FALSE",q=$("#LunchPriceC").is(":checked")?gblLiciousConfig.lunchPriceC+" Lunch":"FALSE",r=$("#DinnerPriceA").is(":checked")?gblLiciousConfig.dinnerPriceA+" Dinner":"FALSE",t=$("#DinnerPriceB").is(":checked")?
gblLiciousConfig.dinnerPriceB+" Dinner":"FALSE",u=$("#DinnerPriceC").is(":checked")?gblLiciousConfig.dinnerPriceC+" Dinner":"FALSE",v=k.is(":checked")?"Yes":"",w=l.is(":checked")?"Yes":"",x=N.is(":checked")?"Yes":"",y=p.is(":checked")?"Yes":"";"All Cuisines"!=c.val()?g("cs",c.val()):h("cs");"All Neighbourhoods"!=f.val()?g("nbh",f.val()):h("nbh");"FALSE"!==m?g("lpa","yes"):h("lpa");"FALSE"!==n?g("lpb","yes"):h("lpb");"FALSE"!==q?g("lpc","yes"):h("lpc");"FALSE"!==r?g("dpa","yes"):h("dpa");"FALSE"!==
t?g("dpb","yes"):h("dpb");"FALSE"!==u?g("dpc","yes"):h("dpc");""!==v?g("acc",k.val()):h("acc");""!==w?g("veg",l.val()):h("veg");""!==x?g("vegan",N.val()):h("vegan");""!==y?g("loc",p.val()):h("loc");0<a.length?g("ss",a):h("ss");a=Object.keys(e).length;"undefined"!==$.type(e.appInstanceName)&&a--;"undefined"!==$.type(e.vgnextoid)&&a--;"undefined"!==$.type(e.view)&&a--;0===a?$("#resetFilters").css("visibility","hidden"):$("#resetFilters").css("visibility","visible");A={};z=[];a=!1;for(c=0;c<B.restaurants.length;c++)f=
B.restaurants[c],a=!1,-1===JSON.stringify(f).toLowerCase().indexOf($("#searchString").val().toLowerCase())&&(a=!0),""!==w&&f.lic_veggie!==w&&(a=!0),""!==x&&f.lic_vegan!=x&&(a=!0),""!==y&&f.lic_local!=y&&(a=!0),""!==v&&f.lic_accessible!=v&&(a=!0),""!==b&&-1===f.lic_cuisine.indexOf(b)&&(a=!0),""!==d&&-1===f.lic_neighbourhood.indexOf(d)&&(a=!0),"FALSE"===m&&"FALSE"===n&&"FALSE"===q&&"FALSE"===r&&"FALSE"===t&&"FALSE"===u||"FALSE"!==m&&-1<f.lic_lunchprice.indexOf(m)||"FALSE"!==n&&-1<f.lic_lunchprice.indexOf(n)||
"FALSE"!==q&&-1<f.lic_lunchprice.indexOf(q)||"FALSE"!==r&&-1<f.lic_dinnerprice.indexOf(r)||"FALSE"!==t&&-1<f.lic_dinnerprice.indexOf(t)||"FALSE"!==u&&-1<f.lic_dinnerprice.indexOf(u)||(a=!0),a||(z.push(f),A[f.lic_documentID]=f.lic_imagelink);R();gblLiciousConfig.showReservationTab&&S();F()}function T(a,b,d){var c="",e=0,g="";$.each(O,function(a,b){b.lic_restaurantid===d&&(c+="<br>",0===e&&(c+="<p><strong>Today's Reservation Availability:</strong></p>",g=b.lic_reserveline),c+=""!==b.lic_lunchoption?
"<div>":"",c+=""===b.lic_lunchoption?"":"<span><strong>Lunch</strong>: "+b.lic_lunchoption+" today</span>",c+=""!==b.lic_lunchoption?"</div>":"",c+=""!==b.lic_dinneroption?"<div>":"",c+=""===b.lic_dinneroption?"":"<span><strong>Dinner</strong>: "+b.lic_dinneroption+" today</span>",c+=""!==b.lic_dinneroption?"</div>":"",c+="<div><small><em>Date posted by restaurant: "+b.lic_datetime+"</em></small></div>",e++)});0<e&&(c+="<p><span>Call "+g+" to book your table.</span>");return c}function H(a){x=a;g("key",
a);var b="";$.each(B.restaurants,function(a,c){if(c.lic_documentID==x){b+='<div style="" class="row liciousdetail">';b+='<div class="col-xs-12 col-sm-8">';b+='<h1 class="col-xs-12 lic_restname">'+c.lic_restName+"</h1>";b+=""===c.lic_hotel?"":'<p class="lic_hotel">'+c.lic_hotel+"</p>";b+='<p class="addresssection"><span class="lic_address">'+c.lic_address+"</span>";b+=""===c.lic_additionaladdress?"":", "+c.lic_additionaladdress;b+='<span class="lic_address hidden-print" cotlabel="map">   (<a title="map" href="http://maps.google.com?q='+
c.lic_address+' Toronto Ontario" target="_blank">map</a>)</span></p>';b+='<p class="lic_phone">'+c.lic_phone+"</p>";b+='<p class="lic_neighbourhood">'+c.lic_neighbourhood.join(", ")+"</p>";b+='<p class="icons">';b+="Yes"==c.lic_veggie?'<img class="icon lic_veggie" title="" data-original-title="Vegetarian three-course menu option available at '+c.lic_restName+'" alt="'+c.lic_restName+' Vegetarian Option Icon" src="'+p.veg+'">':"";b+="Yes"==c.lic_vegan?'<img class="icon lic_vegan" title="" data-original-title="Vegan three-course menu option available '+
c.lic_restName+'" alt="'+c.lic_restName+'Vegan Option Icon" src="'+p.vegan+'">':"";b+="Yes"==c.lic_local?'<img class="icon lic_local" alt="Local Meals Offered Icon for '+c.lic_restName+'" src="'+p.local+'" title="" data-original-title="Locally sourced menu option available at '+c.lic_restName+'">':"";b+="Yes"==c.lic_accessible?'<img class="icon lic_accessible" title="" alt="'+c.lic_restName+' Accessible Icon" src="'+p.acc+'" data-original-title="'+c.lic_restName+' Accessible restaurant">':"";b+="</p>";
b+='<div class="sitelinks">';b+=""===c.lic_url?"":'<span class="lic_www hidden-print"><a title="Website" href="'+c.lic_url+'" target="_blank">Website</a></span>';b+=""===c.lic_twit||"http://twitter.com/"===c.lic_twit||"https://twitter.com/"===c.lic_twit?"":'<span class="lic_twit hidden-print"><a title="Twitter" href="'+c.lic_twit+'" target="_blank">Twitter</a></span>';b+=""===c.lic_instagram||"http://instagram.com/"===c.lic_instagram||"https://instagram.com/"===c.lic_instagram?"":'<span class="lic_instagram hidden-print "><a title="Instagram site" href="'+
c.lic_instagram+'" target="_blank">Instagram</a></span>';b+=""===c.lic_fb||"http://www.facebook.com/"===c.lic_fb||"https://www.facebook.com/"===c.lic_fb?"":'<span class="lic_fb hidden-print"><a title="Facebook" href="'+c.lic_fb+'" target="_blank">Facebook</a></span>';b+="</div>";b+='<p class="lic_profile">'+c.lic_profile.join("<br>")+"</p>";b+='<p><span><strong>Cuisine: </strong></span><span class="lic_cuisine">'+c.lic_cuisine.join(", ")+"</span></p>";b+='<div id="reservationLink"></div>';b+=T(c.lic_address,
c.lic_restName,c.lic_documentID);b+='<div class="sitelinks">';b+=""===c.lic_lunchlink&&""===c.lic_dinnerlink?"":"<br><p><strong>Reserve online</strong>  for seatings between "+gblLiciousConfig.dateReservation+'</p><img src="/static_files/WebApps/images/fork.png"> &nbsp;';b+=""===c.lic_lunchlink?"":'<span class="lic_lunchlink"><a title="Reserve Lunch" href="'+c.lic_lunchlink+'" target="_blank">Reserve Lunch</a></span>';b+=""===c.lic_dinnerlink?"":'<span class="lic_dinnerlink"><a title="Reserve Dinner" href="'+
c.lic_dinnerlink+'" target="_blank">Reserve Dinner</a></span>';b+=""===c.lic_lunchlink&&""===c.lic_dinnerlink?"":"<br>";b+="</div>";b+='<img class="visible-xs img-thumbnail detail-right lic_imagelink" src="'+c.lic_imagelink+'" alt="Image of the restaurant '+c.lic_restName+'">';var e="Yes"==c.lic_lunch&&"Yes"==c.lic_dinner?"col-sm-6":"col-sm-12";"Yes"==c.lic_lunch&&(b+='<div class="lic_lunch col-xs-12 '+e+'">',b+='<div class="menu_heading"><p class="lic_lunchprice">'+c.lic_lunchprice+"</p>",b+='<p class="lic_lunch">Plus taxes and gratuity</p></div>',
b+="<p>"+c.lic_lunchmenu.join("<br>")+"</p></div>");"Yes"==c.lic_dinner&&(b+='<div class="lic_dinner col-xs-12 '+e+'">',b+='<div class="menu_heading"><p class="lic_dinnerprice">'+c.lic_dinnerprice+"</p>",b+='<p class="lic_dinner">Plus taxes and gratuity</p></div>',b+="<p>"+c.lic_dinnermenu.join("<br>")+"</p></div>");b+="</div>";b+='<div class="col-xs-12 col-sm-4"><img class="hidden-xs img-thumbnail detail-right lic_imagelink" src="'+c.lic_imagelink+'" alt="Image of the restaurant '+c.lic_restName+
'">';b+='<div style="margin: auto;"><input id="searchTextField" type="text" size="50">';b+='<div style="height: 300px; width: 100%; position: relative; overflow: hidden; -webkit-transform: translateZ(0px); background-color: rgb(229, 227, 223);  margin-top: 10px; margin-bottom: 5px; " id="map-canvas" class="hidden-xs">';b+="</div>";b+='<div class="hidden-xs">';b+="</div><br>";b+='<div class="mapoption active"><div class="hidden-print"><a class="ttcplanner" href="http://maps.google.ca?daddr='+c.lic_address+
'" target="_blank">Get Directions</a></div></div>';b+="</div></div>";b+='<div class="col-xs-12">';b+='<div class="disclaimer alert alert-info">';b+="<p><small>Prices listed are per person. Beverages, taxes and gratuity are additional. Some restrictions apply. Lunch and Dinner menus include starter, entr\u00e9e and dessert.</small></p><br>";b+="<p><small>Restaurant operating hours vary. Lunch menu start and end times vary per restaurant. Some restaurants offer only a brunch menu on weekends and do not participate in the "+
gblLiciousConfig.season+" lunch promotion. Contact individual restaurants for details.</small></p><br>";b+="<p><strong><small>Online Reservations</small></strong></p>";b+="<p><small>The City of Toronto is not involved in the online reservation of restaurants. For those restaurants participating in the online reservation program, you will see a Reserve Lunch and/or Reserve Dinner link on the first day reservations are accepted. When you click these links you are leaving the City's website. Any information you provide to make the reservation is not collected by the City of Toronto.</small></p><br>";
b+="<p><small><strong>Today's Reservations</strong> details are populated by the restaurants participating in the Prix Fixe promotion. Information was accurate at the time of posting. Please contact the restaurants directly for more information and to reserve a table.</small></p>";b+="</div>";b+="</div>";return!1}});$("#modalBody").html(b);$("#detailModal").hasClass("in")?J():$("#detailModal").modal("show")}function J(){t=new google.maps.LatLng(43.721459,-79.373903);var a={zoom:14,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,
mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT},panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_BOTTOM},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}};q=new google.maps.Map(document.getElementById("map-canvas"),a);var b,a=document.createElement("button");a.id="resetMap";
a.className="resetMap hidden-print";a.innerHTML="Reset Map";a.onclick=function(){M(q,y)};q.controls[google.maps.ControlPosition.RIGHT_TOP].push(a);u=document.createElement("div");u.id="mapinfobox";u.className="infoBox";q.controls[google.maps.ControlPosition.TOP_LEFT].push(u);$.each(z,function(a,c){t=new google.maps.LatLng(c.lic_lat,c.lic_lng);b=new google.maps.Marker({id:"mapmarker"+a,type:"restaurant",icon:k.restaurant,position:t,map:q,name:c.lic_restName,summary:c.lic_profile.join("<br>"),addsummary:c.lic_address,
neighbourhood:c.lic_neighbourhood.join(", "),phone:c.lic_phone,cuisine:c.lic_cuisine.join(", "),unid:c.lic_documentID,lunchprice:c.lic_lunchprice,dinnerprice:c.lic_dinnerprice});b.setZIndex(277E6);c.lic_documentID==x&&(q.setCenter(t),b.setZIndex(299000001),b.setIcon(k.restaurant_selected));y.push(b);google.maps.event.addDomListener(b,"click",function(){L(this,u,y)})});$(".icons img").tooltip({html:!0,placement:"right"})}function U(a,b){var d=a.lic_restName.toLowerCase(),c=b.lic_restName.toLowerCase();
return d>c?1:d<c?-1:0}function V(){return $.ajax({type:"GET",url:gblLiciousConfig.restaurantURL,dataType:"jsonp",jsonpCallback:"jsonRestaurantsCallBack",contentType:"application/json",success:function(a){B=a;z=a.restaurants.sort(U)}})}function W(a,b){return(new Date(b.lic_datetime)).getTime()-(new Date(a.lic_datetime)).getTime()}function X(a,b){return a.lic_restname.toLowerCase()>b.lic_restname.toLowerCase()?1:a.lic_restname.toLowerCase()<b.lic_restname.toLowerCase()?-1:0}function Y(){return $.ajax({type:"GET",
url:gblLiciousConfig.reservationURL,dataType:"jsonp",jsonpCallback:"jsonReservationsCallBack",contentType:"application/json",success:function(a){O=a.reservations.sort(W);C=a.reservations.sort(X)}})}function S(){var a="";0===C.length?a="<tr><td>At this time no restaurants have submitted reservation availability details. Visit this page often to see new postings.</td></tr>":$.each(C,function(b,d){if(!A[d.lic_restaurantid])return!0;a+="<tr id='liciousrevlisttablerow"+b+"'>";a+="<td>";a+="<div>";a+='<div class="col-xs-12 col-sm-10 col-sm-push-2">';
a+='<div class="restaurantname">';a+='<h3 class="lic_restname">';a+='<a href="#" class="showdetail" data-toggle="tooltip" data-placement="bottom" title="View the '+gblLiciousConfig.season+" menu for "+d.lic_restName+'" data-unid="'+d.lic_restaurantid+'">';a+=d.lic_restname;a+="</a>";a+="</h3>";a+=""!==d.lic_lunchoption?"<div>":"";a+=""===d.lic_lunchoption?"":"<span><strong>Lunch</strong>: "+d.lic_lunchoption+" today</span>";a+=""!==d.lic_lunchoption?"</div>":"";a+=""!==d.lic_dinneroption?"<div>":
"";a+=""===d.lic_dinneroption?"":"<span><strong>Dinner</strong>: "+d.lic_dinneroption+" today</span>";a+=""!==d.lic_dinneroption?"</div>":"";a+="<p><span>Call "+d.lic_reserveline+" to book your table. </span>";a+=""===d.lic_lunchlink?"":'<span class="lic_lunchlink"><a class="quantclick" title="Reserve Lunch" href="'+d.lic_lunchlink+'" target="_blank">Reserve Lunch</a></span>&nbsp;&nbsp;';a+=""===d.lic_dinnerlink?"":'<span class="lic_dinnerlink"><a class="quantclick" title="Reserve Dinner" href="'+
d.lic_dinnerlink+'" target="_blank">Reserve Dinner</a></span></p>';a+="<p><small><em>Date posted: "+d.lic_datetime+"</em></small></p>";a+="</div>";a+="</div>";a+='<div class="hidden-xs col-sm-2 col-sm-pull-10">';a+='<a href="#" class="showdetail" data-unid="'+d.lic_restaurantid+'">';a+='<img  data-toggle="tooltip" data-placement="bottom" title="View the '+gblLiciousConfig.season+" menu for "+d.lic_restname+'" alt="Image of the'+d.lic_restname+'" class="restImg img-responsive img-thumbnail" src="'+
A[d.lic_restaurantid]+'" />';a+="</a>";a+="</div>";a+="</div>";a+="</td></tr>"});""===a&&(a+="<tr id='liciouslisttablerow0' ><td class='col-md-12'>No restaurants found</td></tr>");a='<thead><tr><th  class="filter-match">Today\'s Reservations</th></tr></thead><tbody>'+a+"</tbody>";$("#reservationtable").html(a)}function Z(){var a=$("#filterCuisine");$.each(gblLiciousConfig.cuisines,function(b,d){a.append("<option>"+d+"</option")});a=$("#filterNeighbourhood");$.each(gblLiciousConfig.neighbourhoods,
function(b,d){a.append("<option>"+d+"</option")});$("#lblLunchPriceA").text(gblLiciousConfig.lunchPriceA);$("#lblLunchPriceB").text(gblLiciousConfig.lunchPriceB);$("#lblLunchPriceC").text(gblLiciousConfig.lunchPriceC);$("#lblDinnerPriceA").text(gblLiciousConfig.dinnerPriceA);$("#lblDinnerPriceB").text(gblLiciousConfig.dinnerPriceB);$("#lblDinnerPriceC").text(gblLiciousConfig.dinnerPriceC);gblLiciousConfig.showReservationTab||$("#tabRev").hide()}function I(){_qevents&&_qevents.push({qacct:"p-E4hpL7mL2PFtu",
event:"refresh",labels:"_fp.event.Winterlicious Restaurant Button"})}function aa(){Z();e=P();"undefined"!=$.type(e.cs)&&$("#filterCuisine").val(e.cs);"undefined"!=$.type(e.nbh)&&$("#filterNeighbourhood").val(e.nbh);"undefined"!=$.type(e.lpa)&&$("#LunchPriceA").prop("checked",!0);"undefined"!=$.type(e.lpb)&&$("#LunchPriceB").prop("checked",!0);"undefined"!=$.type(e.lpc)&&$("#LunchPriceC").prop("checked",!0);"undefined"!=$.type(e.dpa)&&$("#DinnerPriceA").prop("checked",!0);"undefined"!=$.type(e.dpb)&&
$("#DinnerPriceB").prop("checked",!0);"undefined"!=$.type(e.dpc)&&$("#DinnerPriceC").prop("checked",!0);"undefined"!=$.type(e.acc)&&$("#filterAccessible").prop("checked",!0);"undefined"!=$.type(e.veg)&&$("#filterVeggie").prop("checked",!0);"undefined"!=$.type(e.vegan)&&$("#filterVegan").prop("checked",!0);"undefined"!=$.type(e.loc)&&$("#filterLocal").prop("checked",!0);"undefined"!=$.type(e.ss)&&$("#searchString").val(e.ss);var a=[];a.push(V());gblLiciousConfig.showReservationTab&&a.push(Y());$.when.apply($,
a).done(function(){n();"undefined"!==$.type(e.key)&&H(e.key);var a=gblLiciousConfig.StartTab;"undefined"!==$.type(e.view)&&(a=e.view);gblLiciousConfig.showReservationTab||"tabRev"!==a||(a="tabList");E(a)});Q();$("#searchString").focus();$("#searchString").trigger("keyup");$("#searchString").attr("placeholder",gblLiciousConfig.seasonSearch)}function ba(){var a="",b="";0===document.location.hostname.length||"localhost"===document.location.hostname?(k={restaurant:"static_files/WebApps/images/markerblue.png",
restaurant_selected:"static_files/WebApps/images/markerblue_sel.png"},p={veg:"static_files/WebApps/images/veggieicon.png",vegan:"static_files/WebApps/images/veganicon.png",local:"static_files/WebApps/images/localicon.png",acc:"static_files/WebApps/images/fullyaccessibleicon.png"},a+='<link rel="stylesheet" href="css/licious.css"><script type="text/javascript" src="js/oms.min.js">\x3c/script>',a+='<script type="text/javascript" src="/placeholders/placeholders.min.js">\x3c/script>',b="html/licious.html"):
(a+='<link rel="stylesheet" href="/static_files/WebApps/Licious/css/licious.css">',a+='<script type="text/javascript" src="/static_files/assets/oms/oms.min.js">\x3c/script>',a+='<script type="text/javascript" src="/static_files/assets/placeholders/placeholders.jquery.min.js">\x3c/script>',b="/static_files/WebApps/Licious/html/licious.html");$("#appCode").html(a);$("#appDisplay").load(b,function(){aa()})}var r,u,t,m,q,w,v=[],y=[],O=[],C=[],B,z=[],A={},x,e={},G=0,k={restaurant:"/static_files/WebApps/images/markerblue.png",
restaurant_selected:"/static_files/WebApps/images/markerblue_sel.png"},p={veg:"/static_files/WebApps/images/veggieicon.png",vegan:"/static_files/WebApps/images/veganicon.png",local:"/static_files/WebApps/images/localicon.png",acc:"/static_files/WebApps/images/fullyaccessibleicon.png"};$(document).ready(function(){ba()})})(this);

(function(){angular.module("eventCalendarApp").factory("ecCoTDataService",["$http","$q",function(w,c){function r(a){var b=[];angular.forEach(p,function(f,c){f.category===a&&b.push(f)});return b}function d(a,b){var f=1;"-"===b[0]&&(f=-1,b=b.substr(1));return function(c,d){var e=0,e=""!==a?c[a][b]<d[a][b]?-1:c[a][b]>d[a][b]?1:0:c[b]<d[b]?-1:c[b]>d[b]?1:0;return e*f}}for(var t=[{day:"Monday"},{day:"Tuesday"},{day:"Wednesday"},{day:"Thursday"},{day:"Friday"},{day:"Saturday"},{day:"Sunday"}],u=[],q=1;31>=
q;q++)u.push({value:q});var e,g,h,k,l,m,p,n,v=[{id:"cityWide",title:"City Wide"},{id:"downtown",title:"Downtown"},{id:"centralEast",title:"Central East"},{id:"centralWest",title:"Central West"},{id:"northEast",title:"Northeast"},{id:"northWest",title:"Northwest"},{id:"southEast",title:"Southeast"},{id:"southWest",title:"Southwest"}];return{eventCategories:function(){var a=c.defer();e&&a.resolve(angular.copy(e));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/EventCategories.json",
type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks0",success:function(b){e=b.sort(d("","name"));a.resolve(angular.copy(e))},error:function(b,a){console.log("eventCategories retreival error")}});return a.promise},eventThemes:function(){var a=c.defer();g&&a.resolve(angular.copy(g));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/EventThemes.json",type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks8",success:function(b){g=b.sort(d("",
"name"));a.resolve(angular.copy(g))},error:function(a,c){console.log("eventThemes retreival error")}});return a.promise},sportsSubcategories:function(){var a=c.defer();h&&a.resolve(angular.copy(h));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/EventSportsCategories.json",type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks1",success:function(b){h=b.sort(d("","name"));a.resolve(angular.copy(h))},error:function(a,c){console.log("event Sport Categories retreival error")}});
return a.promise},eventFeatures:function(){var a=c.defer();k&&a.resolve(angular.copy(k));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/EventFeatures.json",type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks5",success:function(b){k=b;a.resolve(angular.copy(k))},error:function(a,c){console.log("eventFeaturesCache retreival error")}});return a.promise},costRanges:function(){var a=c.defer();l&&a.resolve(angular.copy(l));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/CostRanges.json",
type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks2",success:function(b){l=b.sort(d("","name"));a.resolve(angular.copy(l))},error:function(a,c){console.log("cost Range retreival error")}});return a.promise},cityDistricts:function(){return angular.copy(v)},daysOfWeek:function(){return angular.copy(t)},newsletterCategories:function(){var a=c.defer();m&&a.resolve(angular.copy(m));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/NewsletterCategories.json",
type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks3",success:function(b){m=b.sort(d("","name"));a.resolve(angular.copy(m))},error:function(a,c){console.log("event Sport Categories retreival error")}});return a.promise},newsletterSubcategories:function(a){var b=c.defer();p?b.resolve(r(a)):$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/NewsletterSubcategories.json",type:"GET",crossDomain:!0,cache:!1,dataType:"jsonp",jsonpCallback:"angularcallbacks4",
success:function(c){p=c.sort(d("","value"));b.resolve(r(a))},error:function(a,b){console.log("newsletter sub categories retreival error")}});return b.promise},helpText:function(){var a=c.defer();n&&a.resolve(angular.copy(n));$.ajax({url:"//www1.toronto.ca/static_files/WebApps/EventsCalendar/data/HelpText.json",type:"GET",crossDomain:!0,dataType:"jsonp",jsonpCallback:"angularcallbacks7",success:function(b){n=b;a.resolve(angular.copy(n))},error:function(a,c){console.log("helpTextCache retreival error")}});
return a.promise}}}])})();
